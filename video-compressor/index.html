<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Lightweight in-browser video compressor powered by ffmpeg.wasm.">
    <title>Video Compressor | LYMN Web Tools</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ¬</text></svg>">
    <script src="coi-serviceworker.js"></script>
</head>

<body class="video-compressor-page">
    <div class="app-shell vc-shell">
        <header class="page-header">
            <div class="header-top">
                <h1>Video Compressor</h1>
                <button id="theme-switcher" class="theme-switcher" aria-label="Toggle dark/light theme">
                    <span class="light-icon" aria-hidden="true">ðŸŒž</span>
                    <span class="dark-icon" aria-hidden="true">ðŸŒ™</span>
                </button>
            </div>
            <div class="tab-navigation" role="tablist">
                <a href="./" class="tab-button tab-link active" aria-current="page">Video Compressor</a>
                <a href="../#display-tool" class="tab-button tab-link">Display Resolution</a>
                <a href="../#counter-tool" class="tab-button tab-link">Word Counter</a>
                <a href="../#case-tool" class="tab-button tab-link">Case Converter</a>
                <a href="../#clean-text" class="tab-button tab-link">Clean Text</a>
                <a href="../#device-info" class="tab-button tab-link">Device Details</a>
            </div>
            <p class="page-intro">Compress mp4 clips right in your browser without uploading them anywhere.<br>The tool uses
                ffmpeg.wasm and works best for clips up to ~150â€“200 MB.</p>
        </header>

        <main class="vc-main">
            <section class="module-card" aria-label="Video selection">
                <h2><span class="step-number">1</span> Upload your mp4 file</h2>
                <p class="hint">Supported input: mp4 (H.264 / HEVC). On older phones or laptops, compression may take a
                    while.</p>
                <div class="drop-area" id="dropZone" role="button" tabindex="0" aria-describedby="dropHint">
                    <p class="drop-title">Drop video here or click to browse</p>
                    <p class="drop-subtitle" id="dropHint">Maximum recommended size ~150 MB</p>
                    <input type="file" id="videoInput" accept="video/mp4" aria-label="Video input">
                </div>
                <p class="selected-file" id="selectedFile">No file selected.</p>
                <div class="upload-status" id="uploadStatus" aria-live="polite" hidden>
                    <span class="spinner small" aria-hidden="true"></span>
                    <span id="uploadStatusText">Preparing fileâ€¦</span>
                </div>
            </section>

            <section class="module-card" aria-label="Compression settings">
                <h2><span class="step-number">2</span> Choose preset</h2>
                <form class="preset-list" id="presetForm">
                    <label class="preset-option">
                        <input type="radio" name="preset" value="mp4" checked>
                        <div>
                            <strong>Smaller MP4 (H.264)</strong>
                            <p>Converts mp4 to mp4 with CRF 28 and "faster" preset. Keeps audio track.</p>
                        </div>
                    </label>
                </form>
                <p class="disclaimer">Tip: H.264 MP4 provides good compression and wide compatibility.</p>
            </section>

            <section class="module-card" aria-label="Compression controls">
                <h2><span class="step-number">3</span> Compress</h2>
                <div class="actions">
                    <button id="startButton" class="primary">Compress video</button>
                    <div class="engine-loader" id="engineLoader" aria-live="polite" hidden>
                        <span class="spinner" aria-hidden="true"></span>
                        <span id="engineLoaderText">Loading compression engineâ€¦</span>
                    </div>
                </div>
                <div class="progress-wrapper" aria-live="polite">
                    <progress id="progressBar" value="0" max="1"></progress>
                    <p id="progressLabel">Waiting for a fileâ€¦</p>
                </div>
            </section>

            <section class="module-card" aria-label="Result">
                <h2><span class="step-number">4</span> Download</h2>
                <p id="resultMessage">Your compressed video will appear here.</p>
                <a id="downloadLink" class="primary ghost" href="#" download hidden>Download result</a>
            </section>
        </main>

        <section class="vc-limits" aria-label="Limitations">
            <h2>Practical limits</h2>
            <ul>
                <li>Works best with mp4 files under ~150 MB.</li>
                <li>Compression runs locally â€” keep the tab open.</li>
                <li>Phones and low-end laptops may take several minutes.</li>
                <li>While ffmpeg.wasm is loading, please wait for the spinner to finish.</li>
            </ul>
        </section>

        <footer class="vc-footer">
            <p>Powered by <code>ffmpeg.wasm</code>. No videos leave your browser.</p>
            <p class="version-label">Tool Version 1.5</p>
        </footer>
    </div>

    <script src="./vendor/ffmpeg.js"></script>
    <script type="module" src="./script.js"></script>
</body>

</html>
